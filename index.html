<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="ETERNIVERSE â€” zaawansowany panel redakcyjny universum EterSeeker. Master Edition 2026 z AI, timeline, search i collab."/>
  <title>ETERNIVERSE â€” Master Panel Â· 2026</title>

  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Roboto+Mono:wght@300;400;500&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico">

  <!-- BELLA SAFE EMBED -->
  <style>
    #bellaTab iframe {
      width: 100%;
      height: calc(100vh - 170px);
      border: none;
      border-radius: 18px;
      background: #000;
      box-shadow: 0 0 40px rgba(40,211,198,0.35);
    }
  </style>
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="global-header">
  <div class="header-grid">
    <div class="logo-section">
      <h1>ETERNIVERSE</h1>
      <span class="edition-badge">MASTER 2026</span>
    </div>

    <div class="search-section">
      <div class="search-box">
        <input type="text" id="globalSearch" placeholder="ğŸ” Szukaj tytuÅ‚Ã³w, Å›wiatÃ³w, tagÃ³w, autorÃ³w...">
        <button id="aiAssistantBtn" class="ai-btn">ğŸ¤– AI Helper</button>
      </div>
    </div>

    <div class="user-controls">
      <div class="status-indicators">
        <span id="syncStatus" class="status-dot online"></span>
        <span id="autosaveStatus">Autozapis: aktywny</span>
      </div>
      <div class="header-actions">
        <button id="undoBtn">â†¶</button>
        <button id="redoBtn">â†·</button>
        <button id="publishBtn" class="btn-primary">ğŸš€ Publikuj</button>
      </div>
    </div>
  </div>
</header>

<!-- ================= TAB SYSTEM ================= -->
<nav class="tab-nav">
  <button class="tab-btn active" data-tab="map">ğŸ—ºï¸ Mapa ÅšwiatÃ³w</button>
  <button class="tab-btn" data-tab="editor">âœï¸ Edytor</button>
  <button class="tab-btn" data-tab="timeline">ğŸ“Š Timeline</button>
  <button class="tab-btn" data-tab="analytics">ğŸ“ˆ Analiza</button>
  <button class="tab-btn" data-tab="universe">ğŸŒŒ Universum</button>
  <button class="tab-btn" data-tab="ai">ğŸ¤– AI Studio</button>
  <button class="tab-btn" data-tab="bella">ğŸ§  Bella</button>
</nav>

<!-- ================= MAIN ================= -->
<div class="main-container">

<!-- ===== MAP TAB ===== -->
<div id="mapTab" class="tab-content active">
  <div class="sidebar">
    <div class="filter-panel">
      <h4>Filtry</h4>
      <select id="worldFilter"></select>
      <select id="statusFilter"></select>
      <input type="range" min="0" max="5">
    </div>
    <div class="world-list-mini">
      <h4>Åšwiaty</h4>
      <div id="miniWorldList"></div>
    </div>
  </div>

  <div class="map-main">
    <div class="map-controls-advanced">
      <button id="addWorldBtn">â• Nowy Åšwiat</button>
      <button id="connectGatesBtn">ğŸ”— PoÅ‚Ä…cz Bramy</button>
      <div class="zoom-controls">
        <button id="zoomIn">ï¼‹</button>
        <button id="zoomOut">ï¼</button>
        <button id="resetZoom">âŸ³</button>
      </div>
    </div>

    <div id="interactiveMap" class="interactive-map">
      <canvas id="mapCanvas"></canvas>
      <div id="worldList" class="world-grid-overlay"></div>
      <div id="gatesContainer"></div>
    </div>
  </div>
</div>

<!-- ===== EDITOR TAB ===== -->
<div id="editorTab" class="tab-content">
  <div class="editor-split">
    <div class="editor-form-container">
      <h2 id="activeBookTitle">Nowa ksiÄ…Å¼ka</h2>
      <div id="editor-content" contenteditable="true" class="rich-editor"></div>
    </div>
    <div class="preview-pane">
      <iframe id="livePreview"></iframe>
    </div>
  </div>
</div>

<!-- ===== TIMELINE ===== -->
<div id="timelineTab" class="tab-content">
  <canvas id="timelineCanvas"></canvas>
</div>

<!-- ===== ANALYTICS ===== -->
<div id="analyticsTab" class="tab-content">
  <canvas id="chartCanvas"></canvas>
</div>

<!-- ===== UNIVERSE ===== -->
<div id="universeTab" class="tab-content">
  Universum Builderâ€¦
</div>

<!-- ===== AI STUDIO ===== -->
<div id="aiTab" class="tab-content">
  <textarea id="aiPrompt"></textarea>
  <button id="generateContent">Generuj</button>
  <div id="aiOutput"></div>
</div>

<!-- ===== ğŸ§  BELLA ===== -->
<div id="bellaTab" class="tab-content">
  <iframe src="bella.html" title="Bella AI â€” ETERNIVERSE"></iframe>
</div>

</div>

<!-- ================= TAB LOGIC ================= -->
<script>
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabs = {
    map: document.getElementById('mapTab'),
    editor: document.getElementById('editorTab'),
    timeline: document.getElementById('timelineTab'),
    analytics: document.getElementById('analyticsTab'),
    universe: document.getElementById('universeTab'),
    ai: document.getElementById('aiTab'),
    bella: document.getElementById('bellaTab')
  };

  tabButtons.forEach(btn => {
    btn.onclick = () => {
      tabButtons.forEach(b => b.classList.remove('active'));
      Object.values(tabs).forEach(t => t.classList.remove('active'));
      btn.classList.add('active');
      tabs[btn.dataset.tab].classList.add('active');
    };
  });

  // BELLA â†’ EDITOR bridge (gotowe na przyszÅ‚oÅ›Ä‡)
  window.addEventListener('message', e => {
    if (e.data?.type === 'BELLA_EXPORT') {
      document.getElementById('editor-content').innerText = e.data.payload;
    }
  });
</script>

<!-- ================= CORE MODULES ================= -->
<script src="js/core.js"></script>
<script src="js/tabs.js"></script>
<script src="js/map3d.js"></script>
<script src="js/editor-rich.js"></script>
<script src="js/ai-integration.js"></script>
<script src="js/analytics.js"></script>
<script src="js/timeline.js"></script>
<script src="js/search.js"></script>
<script src="js/export-advanced.js"></script>
<script src="js/sync-github.js"></script>
<script src="js/preview-live.js"></script>
<script src="js/notifications.js"></script>
<script src="js/hotkeys.js"></script>
<script src="js/data.js"></script>
<script src="js/app.js"></script>

</body>
</html>