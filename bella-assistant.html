<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bella • Sterowanie ETERNIVERSE</title>

<style>
body {
  margin: 0;
  background: #050814;
  color: #e9f4ff;
  font-family: monospace;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  padding: 10px;
  text-align: center;
  font-weight: bold;
  background: #0a1727;
}

#console {
  flex: 1;
  padding: 12px;
  overflow-y: auto;
}

.line { margin-bottom: 6px; }
.user { color: #d9a441; }
.bella { color: #28d3c6; }

footer {
  display: flex;
  border-top: 1px solid #20324a;
}

input {
  flex: 1;
  padding: 12px;
  background: #0a1727;
  border: none;
  color: white;
}

button {
  padding: 12px;
  font-weight: bold;
}
</style>
</head>

<body>

<header>❤️ BELLA → ETERNIVERSE PRO MASTER ❤️</header>
<div id="console"></div>

<footer>
  <input id="input" placeholder="komenda Belli… (/help)">
  <button id="send">▶</button>
</footer>

<script>
/* ===== PODŁĄCZENIE DO TWOJEJ APLIKACJI ===== */

/*
  UWAGA:
  Bella zakłada, że Twoja aplikacja:
  window.eterniverse = instancja klasy Eteruniverse
*/

function hasCore() {
  return window.eterniverse instanceof Object;
}

/* ===== BELLA ===== */

const consoleEl = document.getElementById('console');
const inputEl = document.getElementById('input');

function line(text, cls) {
  const d = document.createElement('div');
  d.className = 'line ' + cls;
  d.textContent = text;
  consoleEl.appendChild(d);
  consoleEl.scrollTop = consoleEl.scrollHeight;
}

function bella(cmd) {
  if (!hasCore()) {
    return 'Nie widzę ETERNIVERSE. Uruchom app.js.';
  }

  if (cmd === '/help') {
    return `KOMENDY:
 /status
 /gates
 /add-gate
 /mode architekt
 /mode czytelnik
 /render`;
  }

  if (cmd === '/status') {
    return `STATUS:
Bramy: ${eterniverse.data.gates.length}
Tryb: ${eterniverse.mode}`;
  }

  if (cmd === '/gates') {
    return eterniverse.data.gates
      .map(g => g.name)
      .join('\n');
  }

  if (cmd === '/add-gate') {
    eterniverse.data.gates.push({
      id: Date.now(),
      name: 'NOWA BRAMA',
      sub: 'Dodana przez Bellę',
      tag: 'BELLA',
      books: []
    });
    eterniverse.saveData();
    eterniverse.render();
    return 'Brama dodana i zsynchronizowana.';
  }

  if (cmd.startsWith('/mode')) {
    const m = cmd.includes('czytelnik') ? 'CZYTELNIK' : 'ARCHITEKT';
    eterniverse.setMode(m);
    return `Tryb ustawiony: ${m}`;
  }

  if (cmd === '/render') {
    eterniverse.render();
    return 'Render wymuszony.';
  }

  return 'Nieznana komenda. /help';
}

/* ===== UI ===== */

function send() {
  const txt = inputEl.value.trim();
  if (!txt) return;

  line('TY: ' + txt, 'user');

  const r = bella(txt);
  line('BELLA: ' + r, 'bella');

  inputEl.value = '';
}

document.getElementById('send').onclick = send;
inputEl.addEventListener('keydown', e => e.key === 'Enter' && send());

line('BELLA: Połączona. Czekam na komendy.', 'bella');
</script>

</body>
</html>